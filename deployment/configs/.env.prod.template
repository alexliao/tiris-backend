# Production Environment Configuration Template for Tiris Backend
# Copy this file to .env.prod and fill in the actual values

# ============================================================================
# SECURITY WARNING: 
# - Never commit this file with real values to version control
# - Use strong, randomly generated passwords and secrets
# - Rotate secrets regularly
# ============================================================================

# Application Configuration
APP_VERSION=latest
BUILD_TIME=
GIT_COMMIT=
APP_PORT=8080
APP_REPLICAS=2
LOG_LEVEL=info

# Domain Configuration
DOMAIN=tiris.ai
CORS_ALLOWED_ORIGINS=https://tiris.ai,https://app.tiris.ai,https://admin.tiris.ai

# Database Configuration (PostgreSQL + TimescaleDB)
DB_HOST=postgres
DB_PORT=5432
DB_NAME=tiris_prod
DB_USER=tiris_user
DB_PASSWORD=CHANGE_ME_STRONG_DB_PASSWORD
DB_SSL_MODE=require

# NATS Configuration
NATS_PORT=4222
NATS_HTTP_PORT=8222
NATS_USER=nats_user
NATS_PASSWORD=CHANGE_ME_STRONG_NATS_PASSWORD

# Redis Configuration
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_STRONG_REDIS_PASSWORD

# JWT Configuration (CRITICAL: Use strong, unique secrets)
JWT_SECRET=CHANGE_ME_VERY_STRONG_JWT_SECRET_AT_LEAST_32_CHARS
REFRESH_SECRET=CHANGE_ME_VERY_STRONG_REFRESH_SECRET_AT_LEAST_32_CHARS
JWT_EXPIRATION=3600
REFRESH_EXPIRATION=604800

# OAuth Configuration
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=CHANGE_ME_GOOGLE_CLIENT_SECRET
WECHAT_APP_ID=wx1234567890abcdef
WECHAT_APP_SECRET=CHANGE_ME_WECHAT_APP_SECRET

# SSL Configuration
HTTP_PORT=80
HTTPS_PORT=443
SSL_CERT_PATH=/etc/ssl/certs/tiris.ai.crt
SSL_KEY_PATH=/etc/ssl/private/tiris.ai.key

# Storage Paths (adjust for your server)
DATA_PATH=/opt/tiris/data
LOG_PATH=/opt/tiris/logs
BACKUP_PATH=/opt/tiris/backups

# Backup Configuration
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Monitoring Configuration
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30s

# Rate Limiting
RATE_LIMIT_ENABLED=true
API_RATE_LIMIT_PER_HOUR=1000          # General API endpoints per user
AUTH_RATE_LIMIT_PER_HOUR=60           # Authentication endpoints per IP
TRADING_RATE_LIMIT_PER_HOUR=600       # Trading operations per user

# ============================================================================
# DEPLOYMENT INSTRUCTIONS:
# ============================================================================
#
# 1. Copy this file: cp .env.prod.template .env.prod
#
# 2. Generate strong secrets:
#    JWT_SECRET: openssl rand -base64 32
#    REFRESH_SECRET: openssl rand -base64 32
#    DB_PASSWORD: openssl rand -base64 24
#    REDIS_PASSWORD: openssl rand -base64 24
#    NATS_PASSWORD: openssl rand -base64 24
#
# 3. Set up OAuth applications:
#    Google: https://console.cloud.google.com/apis/credentials
#    WeChat: https://developers.weixin.qq.com/
#
# 4. Configure SSL certificates:
#    - Place SSL cert at: ${SSL_CERT_PATH}
#    - Place SSL key at: ${SSL_KEY_PATH}
#    - Or use Let's Encrypt with certbot
#
# 5. Create required directories:
#    sudo mkdir -p /opt/tiris/{data,logs,backups}/{postgres,nats,redis,app,nginx}
#    sudo chown -R 1001:1001 /opt/tiris/data
#    sudo chown -R 1001:1001 /opt/tiris/logs
#
# 6. Start production services:
#    docker-compose -f docker-compose.prod.yml --env-file .env.prod up -d
#
# 7. Run initial setup:
#    docker-compose -f docker-compose.prod.yml --env-file .env.prod --profile migrate run --rm migrate
#    docker-compose -f docker-compose.prod.yml --env-file .env.prod --profile setup run --rm nats-setup
#
# ============================================================================